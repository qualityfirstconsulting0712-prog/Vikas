<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Salary Projection Planner</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React + ReactDOM from CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!-- Recharts -->
    <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>
    <!-- Framer Motion (optional animations) -->
    <script src="https://unpkg.com/framer-motion/dist/framer-motion.umd.js"></script>
  </head>
  <body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/javascript">
      const { useState, useEffect } = React;
      const {
        LineChart,
        Line,
        XAxis,
        YAxis,
        CartesianGrid,
        Tooltip,
        Legend,
        ResponsiveContainer,
        ReferenceDot,
      } = Recharts;

      function SalaryProjection() {
        const [startMonthly, setStartMonthly] = useState(43333);
        const [startYear, setStartYear] = useState(2025);
        const [hikePercent, setHikePercent] = useState(12);
        const [numYears, setNumYears] = useState(20);
        const [rows, setRows] = useState([]);
        const [total, setTotal] = useState(0);
        const [showAnnual, setShowAnnual] = useState(true);
        const [showCumulative, setShowCumulative] = useState(true);
        const [unit, setUnit] = useState("INR");

        useEffect(() => {
          generateTable();
        }, [startMonthly, startYear, hikePercent, numYears]);

        const generateTable = () => {
          let monthly = startMonthly;
          let data = [];
          let totalEarnings = 0;
          for (let i = 0; i < numYears; i++) {
            const year = startYear + i;
            const annual = monthly * 12;
            totalEarnings += annual;
            data.push({ year, monthly, annual, cumulative: totalEarnings });
            monthly = monthly * (1 + hikePercent / 100);
          }
          setRows(data);
          setTotal(totalEarnings);
        };

        const formatValue = (val) => {
          if (unit === "Lakh") return (val / 100000).toFixed(2) + " L";
          if (unit === "Crore") return (val / 10000000).toFixed(2) + " Cr";
          return "â‚¹ " + Math.round(val).toLocaleString("en-IN");
        };

        const peakAnnual = rows.reduce(
          (max, r) => (r.annual > max.annual ? r : max),
          { year: 0, annual: 0, monthly: 0, cumulative: 0 }
        );
        const peakCumulative = rows[rows.length - 1] || { year: 0, cumulative: 0 };

        return (
          <div className="max-w-5xl mx-auto p-4">
            <h1 className="text-2xl font-bold text-center mb-6">
              ðŸ’¼ Salary Projection Planner
            </h1>

            {/* Inputs */}
            <div className="grid md:grid-cols-5 gap-4 mb-6">
              <div>
                <label>Start Monthly CTC (â‚¹)</label>
                <input
                  type="number"
                  className="border rounded p-2 w-full"
                  value={startMonthly}
                  onChange={(e) => setStartMonthly(Number(e.target.value))}
                />
              </div>
              <div>
                <label>Start Year</label>
                <input
                  type="number"
                  className="border rounded p-2 w-full"
                  value={startYear}
                  onChange={(e) => setStartYear(Number(e.target.value))}
                />
              </div>
              <div>
                <label>Annual Hike (%)</label>
                <input
                  type="number"
                  className="border rounded p-2 w-full"
                  value={hikePercent}
                  onChange={(e) => setHikePercent(Number(e.target.value))}
                />
              </div>
              <div>
                <label>Years</label>
                <input
                  type="number"
                  className="border rounded p-2 w-full"
                  value={numYears}
                  onChange={(e) => setNumYears(Number(e.target.value))}
                />
              </div>
              <div>
                <label>Currency Unit</label>
                <select
                  className="border rounded p-2 w-full"
                  value={unit}
                  onChange={(e) => setUnit(e.target.value)}
                >
                  <option value="INR">â‚¹ (Default)</option>
                  <option value="Lakh">Lakh</option>
                  <option value="Crore">Crore</option>
                </select>
              </div>
            </div>

            {/* Total */}
            <p className="text-sm text-gray-700 mb-4">
              Total earnings over {numYears} years: <b>{formatValue(total)}</b>
            </p>

            {/* Table */}
            <div className="overflow-auto max-h-[50vh] border rounded mb-8">
              <table className="w-full text-sm border-collapse">
                <thead className="bg-gray-200 sticky top-0">
                  <tr>
                    <th className="p-2 text-left">Year</th>
                    <th className="p-2 text-right">Monthly CTC</th>
                    <th className="p-2 text-right">Annual CTC</th>
                    <th className="p-2 text-right">Cumulative</th>
                  </tr>
                </thead>
                <tbody>
                  {rows.map((r) => (
                    <tr key={r.year} className="border-b">
                      <td className="p-2">{r.year}</td>
                      <td className="p-2 text-right">{formatValue(r.monthly)}</td>
                      <td className="p-2 text-right">{formatValue(r.annual)}</td>
                      <td className="p-2 text-right">{formatValue(r.cumulative)}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>

            {/* Chart */}
            <h2 className="text-lg font-semibold text-center mb-4">
              ðŸ“Š Salary Growth Over Time
            </h2>
            <div className="h-96">
              <ResponsiveContainer width="100%" height="100%">
                <LineChart data={rows}>
                  <CartesianGrid strokeDasharray="3 3" />
                  <XAxis dataKey="year" />
                  <YAxis />
                  <Tooltip formatter={(val) => formatValue(val)} />
                  <Legend />
                  {showAnnual && (
                    <Line type="monotone" dataKey="annual" stroke="#4f46e5" name="Annual" />
                  )}
                  {showCumulative && (
                    <Line type="monotone" dataKey="cumulative" stroke="#16a34a" name="Cumulative" />
                  )}
                  {showAnnual && peakAnnual.year > 0 && (
                    <ReferenceDot
                      x={peakAnnual.year}
                      y={peakAnnual.annual}
                      r={6}
                      fill="#4f46e5"
                      stroke="white"
                      label="Peak Annual"
                    />
                  )}
                  {showCumulative.year > 0 && (
                    <ReferenceDot
                      x={peakCumulative.year}
                      y={peakCumulative.cumulative}
                      r={6}
                      fill="#16a34a"
                      stroke="white"
                      label="Total"
                    />
                  )}
                </LineChart>
              </ResponsiveContainer>
            </div>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<SalaryProjection />);
    </script>
  </body>
</html>
